
import React from "react";
import { useMemo } from "react";
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend, LineChart, Line, PieChart, Pie, Cell } from "recharts";
import { motion } from "framer-motion";
import { Truck, Route, Settings, Home, BarChart3, User, Search, Bell, MapPin, Clock, DollarSign, AlertTriangle, CheckCircle, XCircle } from "lucide-react";

// Enhanced CSS Styles with better theme consistency
const styles = `
.dashboard-container {
  min-height: 100vh;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.topbar {
  position: sticky;
  top: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid #e2e8f0;
  background: rgba(255, 255, 255, 0.95);
  padding: 1rem 2rem;
  backdrop-filter: blur(20px);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.topbar-logo {
  height: 2.5rem;
  width: 2.5rem;
  border-radius: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 1.2rem;
}

.topbar-search {
  flex-grow: 1;
  max-width: 400px;
  margin: 0 2rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  border: 2px solid #e2e8f0;
  background-color: #ffffff;
  border-radius: 12px;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  color: #475569;
  transition: all 0.3s ease;
}

.topbar-search:focus-within {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.topbar-search input {
  width: 100%;
  background-color: transparent;
  outline: none;
  border: none;
  font-size: 0.875rem;
}

.topbar-search input::placeholder {
  color: #94a3b8;
}

.topbar-icons {
  display: flex;
  align-items: center;
  gap: 1rem;
  color: #64748b;
}

.topbar-icon {
  padding: 0.5rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.topbar-icon:hover {
  background-color: #f1f5f9;
  color: #475569;
}

.notification-badge {
  position: absolute;
  top: 0;
  right: 0;
  background: #ef4444;
  color: white;
  border-radius: 50%;
  width: 8px;
  height: 8px;
  font-size: 0.625rem;
}

.main-layout {
  max-width: 1400px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 2rem;
  padding: 2rem;
  min-height: calc(100vh - 80px);
}

@media (max-width: 1024px) {
  .main-layout {
    grid-template-columns: 1fr;
    gap: 1.5rem;
    padding: 1.5rem;
  }
}

.sidebar {
  position: sticky;
  top: 100px;
  height: fit-content;
}

@media (max-width: 1024px) {
  .sidebar {
    position: static;
    order: 2;
  }
}

.sidebar-nav {
  border-radius: 16px;
  border: 1px solid #e2e8f0;
  background: rgba(255, 255, 255, 0.9);
  padding: 1rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
}

.main-content {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.card {
  border-radius: 16px;
  border: 1px solid #e2e8f0;
  background: rgba(255, 255, 255, 0.9);
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1);
}

.card-title {
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 1rem;
  border-bottom: 1px solid #f1f5f9;
}

.card-title h3 {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1e293b;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.header-cards {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 2rem;
}

@media (max-width: 768px) {
  .header-cards {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
}

.supplier-info {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

@media (min-width: 768px) {
  .supplier-info {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }
}

.supplier-details h1 {
  font-size: 1.75rem;
  font-weight: 700;
  color: #0f172a;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.supplier-details-grid {
  margin-top: 1rem;
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 0.5rem;
  font-size: 0.875rem;
  color: #64748b;
}

@media (min-width: 768px) {
  .supplier-details-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.donut-progress-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
}

.donut-svg {
  transform: rotate(-90deg);
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
}

.donut-background {
  fill: none;
  stroke: rgba(0,0,0,0.08);
  stroke-width: var(--stroke-width, 12);
}

.donut-foreground {
  fill: none;
  stroke: currentColor;
  stroke-width: var(--stroke-width, 12);
  stroke-linecap: round;
  transition: all 0.5s ease;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.donut-label-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

.donut-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: #1e293b;
  line-height: 1;
}

.donut-label {
  font-size: 0.75rem;
  color: #64748b;
  margin-top: 0.25rem;
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  border-radius: 9999px;
  border-width: 1px;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.badge-amber {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  color: #92400e;
  border-color: #f59e0b;
}

.badge-green {
  background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
  color: #166534;
  border-color: #22c55e;
}

.badge-red {
  background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
  color: #b91c1c;
  border-color: #ef4444;
}

.badge-blue {
  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  color: #1d4ed8;
  border-color: #3b82f6;
}

.metric-card {
  border-radius: 12px;
  border: 1px solid #e2e8f0;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  padding: 1rem;
  transition: all 0.3s ease;
}

.metric-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.metric-icon-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #64748b;
  margin-bottom: 0.5rem;
}

.metric-label {
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.metric-value {
  font-size: 1.125rem;
  font-weight: 700;
  color: #1e293b;
}

.stepper {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: #334155;
  flex-wrap: wrap;
}

.stepper-item {
  border-radius: 8px;
  border-width: 1px;
  padding: 0.5rem 0.75rem;
  font-size: 0.75rem;
  font-weight: 600;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-color: #e2e8f0;
  color: #475569;
  transition: all 0.2s ease;
}

.stepper-item:hover {
  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
}

.nav-item {
  display: flex;
  width: 100%;
  align-items: center;
  gap: 0.75rem;
  border-radius: 12px;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.3s ease;
  color: #475569;
  border: none;
  background: transparent;
  cursor: pointer;
  text-align: left;
}

.nav-item-active {
  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
  color: #1d4ed8;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
}

.nav-item:hover:not(.nav-item-active) {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  color: #334155;
}

.nav-item span {
  font-weight: 500;
}

.chart-container {
  height: 300px;
}

.chart-container-lg {
  height: 350px;
}

.routes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 1.5rem;
}

@media (max-width: 768px) {
  .routes-grid {
    grid-template-columns: 1fr;
  }
}

.charts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
  gap: 1.5rem;
}

@media (max-width: 768px) {
  .charts-grid {
    grid-template-columns: 1fr;
  }
}

.status-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 500;
}

.status-primary {
  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  color: #1d4ed8;
}

.status-alternate {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  color: #92400e;
}

.insight-card {
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  border: 1px solid #0ea5e9;
  border-radius: 12px;
  padding: 1rem;
  margin-top: 1rem;
}

.insight-title {
  font-weight: 600;
  color: #0c4a6e;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.insight-text {
  color: #0369a1;
  font-size: 0.875rem;
  line-height: 1.5;
}

.loading-skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.animate-fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-slide-up {
  animation: slideUp 0.6s ease-out;
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
`;

// Enhanced Helper Components
function DonutProgress({ value = 0, size = 120, stroke = 12, label = "", color = "#667eea" }) {
  const radius = (36 - stroke) / 2;
  const circumference = 2 * Math.PI * radius;
  const dash = (value / 100) * circumference;
  
  return (
    <div className="donut-progress-container">
      <svg width={size} height={size} viewBox="0 0 36 36" className="donut-svg">
        <circle
          cx="18"
          cy="18"
          r={radius}
          fill="none"
          stroke="rgba(0,0,0,0.08)"
          strokeWidth={stroke}
          className="donut-background"
        />
        <circle
          cx="18"
          cy="18"
          r={radius}
          fill="none"
          stroke={color}
          strokeWidth={stroke}
          strokeLinecap="round"
          strokeDasharray={`${dash} ${circumference}`}
          className="donut-foreground"
        />
      </svg>
      <div className="donut-label-container">
        <div className="donut-value">{value}%</div>
        {label && <div className="donut-label">{label}</div>}
      </div>
    </div>
  );
}

function Badge({ children, tone = "amber", icon }) {
  const color = {
    green: "badge-green",
    amber: "badge-amber",
    red: "badge-red",
    blue: "badge-blue",
  }[tone];
  
  return (
    <span className={`badge ${color}`}>
      {icon && <span>{icon}</span>}
      {children}
    </span>
  );
}

function Card({ title, action, children, className = "", icon }) {
  return (
    <div className={`card ${className} animate-fade-in`}>
      {(title || action) && (
        <div className="card-title">
          {title && (
            <h3>
              {icon && <span>{icon}</span>}
              {title}
            </h3>
          )}
          {action}
        </div>
      )}
      {children}
    </div>
  );
}

function Stepper({ steps = [] }) {
  return (
    <div className="stepper">
      {steps.map((s, i) => (
        <React.Fragment key={i}>
          <div className="stepper-item">{s}</div>
          {i < steps.length - 1 && (
            <span style={{ color: '#94a3b8', fontSize: '0.75rem' }}>→</span>
          )}
        </React.Fragment>
      ))}
    </div>
  );
}

function NavItem({ icon, label, active, onClick }) {
  return (
    <button 
      className={`nav-item ${active ? "nav-item-active" : ""}`}
      onClick={onClick}
    >
      <span>{icon}</span>
      <span>{label}</span>
    </button>
  );
}

function Metric({ icon, label, value, trend }) {
  return (
    <div className="metric-card">
      <div className="metric-icon-label">
        {icon}
        <span className="metric-label">{label}</span>
      </div>
      <div className="metric-value">{value}</div>
      {trend && (
        <div style={{ 
          fontSize: '0.75rem', 
          color: trend > 0 ? '#22c55e' : '#ef4444',
          marginTop: '0.25rem'
        }}>
          {trend > 0 ? '↗' : '↘'} {Math.abs(trend)}%
        </div>
      )}
    </div>
  );
}

function StatusIndicator({ type, children }) {
  const statusClass = type === 'primary' ? 'status-primary' : 'status-alternate';
  return (
    <span className={`status-indicator ${statusClass}`}>
      {children}
    </span>
  );
}

// Enhanced Main Component
export default function SupplierDashboardDemo() {
  const [activeTab, setActiveTab] = React.useState('home');
  
  const data = {
    message: "Supplier analysis completed",
    supplier: "TechFlow Electronics Pvt Ltd",
    result: {
      user: "68aa3ec4d164d8099df17f77",
      supplier: "68aa7721be2ae28edb9a12ad",
      riskScore: 0.14,
      delayRisk: "Medium",
      estimatedCost: 25275,
      alternateRoutes: [
        {
          path: ["Indore", "Interim Hub", "Mumbai"],
          durationHours: 48,
          distanceKm: 1200,
          costEstimate: 5000,
          notes: "primary-route",
          status: "active",
          reliability: 95
        },
        {
          path: ["Indore", "Alternate Hub", "Mumbai"],
          durationHours: 60,
          distanceKm: 1500,
          costEstimate: 6000,
          notes: "alternate-route",
          status: "backup",
          reliability: 88
        },
        {
          path: ["Indore", "Emergency Route", "Mumbai"],
          durationHours: 72,
          distanceKm: 1800,
          costEstimate: 7500,
          notes: "emergency-route",
          status: "emergency",
          reliability: 75
        }
      ],
    },
  };

  const percentRisk = Math.round(data.result.riskScore * 100);
  const riskTone = data.result.delayRisk === "Low" ? "green" : data.result.delayRisk === "Medium" ? "amber" : "red";
  const riskColor = riskTone === "green" ? "#22c55e" : riskTone === "amber" ? "#f59e0b" : "#ef4444";

  const costData = useMemo(
    () =>
      data.result.alternateRoutes.map((r, idx) => ({
        name: r.notes === "primary-route" ? "Primary" : r.notes === "alternate-route" ? "Alternate" : "Emergency",
        cost: r.costEstimate,
        reliability: r.reliability,
        fill: r.notes === "primary-route" ? "#667eea" : r.notes === "alternate-route" ? "#f59e0b" : "#ef4444"
      })),
    [data]
  );

  const durationVsDistance = useMemo(
    () =>
      data.result.alternateRoutes.map((r, idx) => ({
        name: r.notes === "primary-route" ? "Primary" : r.notes === "alternate-route" ? "Alternate" : "Emergency",
        duration: r.durationHours,
        distance: r.distanceKm,
        reliability: r.reliability
      })),
    [data]
  );

  const reliabilityData = useMemo(
    () => data.result.alternateRoutes.map((r, idx) => ({
      name: r.notes === "primary-route" ? "Primary" : r.notes === "alternate-route" ? "Alternate" : "Emergency",
      value: r.reliability,
      fill: r.notes === "primary-route" ? "#667eea" : r.notes === "alternate-route" ? "#f59e0b" : "#ef4444"
    })),
    [data]
  );

  const COLORS = ['#667eea', '#f59e0b', '#ef4444', '#22c55e', '#8b5cf6'];

  return (
    <>
      <style>{styles}</style>
      <div className="dashboard-container">
        <div className="topbar">
          <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>
            <div className="topbar-logo">S</div>
            <div style={{ fontSize: '1.25rem', fontWeight: '600', color: '#1e293b' }}>
              SupplySense AI
            </div>
          </div>
          <div className="topbar-search">
            <Search size={16} />
            <input placeholder="Search suppliers, routes, analytics..." />
          </div>
          <div className="topbar-icons">
            <div className="topbar-icon" style={{ position: 'relative' }}>
              <Bell size={20} />
              <div className="notification-badge"></div>
            </div>
            <div className="topbar-icon">
              <User size={20} />
            </div>
            <div className="topbar-icon">
              <Settings size={20} />
            </div>
          </div>
        </div>

        <div className="main-layout">
          <aside className="sidebar">
            <nav className="sidebar-nav">
              <NavItem 
                icon={<Home size={18} />} 
                label="Dashboard" 
                active={activeTab === 'home'}
                onClick={() => setActiveTab('home')}
              />
              <NavItem 
                icon={<BarChart3 size={18} />} 
                label="Supplier Analysis" 
                active={activeTab === 'analysis'}
                onClick={() => setActiveTab('analysis')}
              />
              <NavItem 
                icon={<Route size={18} />} 
                label="Route Management" 
                active={activeTab === 'routes'}
                onClick={() => setActiveTab('routes')}
              />
              <NavItem 
                icon={<Truck size={18} />} 
                label="Logistics" 
                active={activeTab === 'logistics'}
                onClick={() => setActiveTab('logistics')}
              />
              <NavItem 
                icon={<Settings size={18} />} 
                label="Settings" 
                active={activeTab === 'settings'}
                onClick={() => setActiveTab('settings')}
              />
            </nav>
          </aside>

          <main className="main-content">
            <div className="header-cards">
              <Card className="header-card-lg" title="Supplier Analysis" icon={<BarChart3 size={20} />}>
                <div className="supplier-info">
                  <div className="supplier-details">
                    <h1>{data.supplier}</h1>
                    <div className="supplier-details-grid">
                      <div><span style={{ fontWeight: '600', color: '#475569' }}>User ID:</span> {data.result.user}</div>
                      <div><span style={{ fontWeight: '600', color: '#475569' }}>Supplier ID:</span> {data.result.supplier}</div>
                      <div><span style={{ fontWeight: '600', color: '#475569' }}>Analysis Date:</span> {new Date().toLocaleDateString()}</div>
                      <div><span style={{ fontWeight: '600', color: '#475569' }}>Last Updated:</span> {new Date().toLocaleTimeString()}</div>
                    </div>
                    <div style={{ marginTop: '1rem' }}>
                      <Badge tone={riskTone} icon={<AlertTriangle size={12} />}>
                        {data.result.delayRisk.toUpperCase()} RISK
                      </Badge>
                    </div>
                  </div>
                  <DonutProgress value={percentRisk} label="Risk Score" color={riskColor} />
                </div>
              </Card>

              <Card className="header-card-sm" title="Cost & Risk Insights" icon={<DollarSign size={20} />}>
                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1rem' }}>
                  <div>
                    <div style={{ fontSize: '0.75rem', textTransform: 'uppercase', letterSpacing: '0.05em', color: '#64748b', marginBottom: '0.25rem' }}>
                      Estimated Cost
                    </div>
                    <div style={{ fontSize: '2rem', fontWeight: '700', color: '#1e293b' }}>
                      ₹{data.result.estimatedCost.toLocaleString("en-IN")}
                    </div>
                  </div>
                  <DonutProgress value={percentRisk} color={riskColor} />
                </div>
                <div className="insight-card">
                  <div className="insight-title">
                    <CheckCircle size={16} />
                    Analysis Complete
                  </div>
                  <div className="insight-text">
                    Risk assessment completed with {percentRisk}% risk score. 
                    {percentRisk < 20 ? " Low risk route recommended." : 
                     percentRisk < 50 ? " Medium risk - monitor closely." : 
                     " High risk - consider alternatives."}
                  </div>
                </div>
              </Card>
            </div>

            <div className="routes-grid">
              {data.result.alternateRoutes.map((r, i) => (
                <motion.div 
                  key={i} 
                  initial={{ opacity: 0, y: 20 }} 
                  animate={{ opacity: 1, y: 0 }} 
                  transition={{ duration: 0.5, delay: i * 0.1 }}
                  className="animate-slide-up"
                >
                  <Card title={`Route ${i + 1} ${r.notes === "primary-route" ? "(Primary)" : r.notes === "alternate-route" ? "(Alternate)" : "(Emergency)"}`}>
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
                        <Stepper steps={r.path} />
                        <StatusIndicator type={r.notes === "primary-route" ? "primary" : "alternate"}>
                          {r.notes === "primary-route" ? "Active" : r.notes === "alternate-route" ? "Backup" : "Emergency"}
                        </StatusIndicator>
                      </div>
                      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '1rem' }}>
                        <Metric 
                          icon={<Clock size={16} />} 
                          label="Duration" 
                          value={`${r.durationHours} hrs`}
                          trend={-5}
                        />
                        <Metric 
                          icon={<Route size={16} />} 
                          label="Distance" 
                          value={`${r.distanceKm} km`}
                        />
                        <Metric 
                          icon={<DollarSign size={16} />} 
                          label="Cost" 
                          value={`₹${r.costEstimate.toLocaleString("en-IN")}`}
                          trend={2}
                        />
                      </div>
                      <div style={{ 
                        display: 'flex', 
                        alignItems: 'center', 
                        justifyContent: 'space-between',
                        padding: '0.75rem',
                        backgroundColor: '#f8fafc',
                        borderRadius: '8px',
                        fontSize: '0.75rem',
                        color: '#64748b'
                      }}>
                        <span>Reliability: <strong style={{ color: '#1e293b' }}>{r.reliability}%</strong></span>
                        <span>Status: <strong style={{ color: '#1e293b' }}>{r.status}</strong></span>
                      </div>
                    </div>
                  </Card>
                </motion.div>
              ))}
            </div>

            <div className="charts-grid">
              <Card className="chart-container chart-container-lg" title="Cost Comparison (₹)" icon={<BarChart3 size={20} />}>
                <ResponsiveContainer width="100%" height="100%">
                  <BarChart data={costData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
                    <CartesianGrid strokeDasharray="3 3" stroke="#e2e8f0" />
                    <XAxis dataKey="name" stroke="#64748b" />
                    <YAxis stroke="#64748b" />
                    <Tooltip 
                      contentStyle={{ 
                        backgroundColor: 'rgba(255, 255, 255, 0.95)', 
                        border: '1px solid #e2e8f0',
                        borderRadius: '8px',
                        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'
                      }}
                    />
                    <Bar dataKey="cost" radius={[8, 8, 0, 0]} />
                  </BarChart>
                </ResponsiveContainer>
              </Card>

              <Card className="chart-container chart-container-lg" title="Duration vs Distance Analysis" icon={<Route size={20} />}>
                <ResponsiveContainer width="100%" height="100%">
                  <LineChart data={durationVsDistance} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
                    <CartesianGrid strokeDasharray="3 3" stroke="#e2e8f0" />
                    <XAxis dataKey="name" stroke="#64748b" />
                    <YAxis stroke="#64748b" />
                    <Tooltip 
                      contentStyle={{ 
                        backgroundColor: 'rgba(255, 255, 255, 0.95)', 
                        border: '1px solid #e2e8f0',
                        borderRadius: '8px',
                        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'
                      }}
                    />
                    <Legend />
                    <Line 
                      type="monotone" 
                      dataKey="duration" 
                      stroke="#667eea" 
                      strokeWidth={3}
                      dot={{ fill: '#667eea', strokeWidth: 2, r: 4 }}
                    />
                    <Line 
                      type="monotone" 
                      dataKey="distance" 
                      stroke="#f59e0b" 
                      strokeWidth={3}
                      dot={{ fill: '#f59e0b', strokeWidth: 2, r: 4 }}
                    />
                  </LineChart>
                </ResponsiveContainer>
              </Card>
            </div>

            <Card className="chart-container" title="Route Reliability Distribution" icon={<BarChart3 size={20} />}>
              <ResponsiveContainer width="100%" height="100%">
                <PieChart>
                  <Pie
                    data={reliabilityData}
                    cx="50%"
                    cy="50%"
                    labelLine={false}
                    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
                    outerRadius={80}
                    fill="#8884d8"
                    dataKey="value"
                  >
                    {reliabilityData.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={entry.fill} />
                    ))}
                  </Pie>
                  <Tooltip 
                    contentStyle={{ 
                      backgroundColor: 'rgba(255, 255, 255, 0.95)', 
                      border: '1px solid #e2e8f0',
                      borderRadius: '8px',
                      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'
                    }}
                  />
                </PieChart>
              </ResponsiveContainer>
            </Card>
          </main>
        </div>
      </div>
    </>
  );
}

